pipeline {
    agent any
        environment {
            NPM_CONFIG_PREFIX = "${env.WORKSPACE}/.npm-global"
            PATH = "${env.WORKSPACE}/.npm-global/bin:$PATH"
        }
    stages {
        stage('install packages') {
            steps {
                dir('Front') {
                    sh 'npm install'
                }
            }
        }
        stage('build') {
                    steps {
                        dir('Front') {
                            sh 'npm run build'
                        }
                    }
                }

        stage('test') {
            steps {
                dir('Front') {
                    sh 'ng test --watch=false --code-coverage'
                }
            }
        }
          stage('Sonarqube report') {
                    steps {
                        dir('Front') {
                            sh 'npm run sonar'
                        }
              }
         }
    }
}
